<script type="text/javascript">
    RED.nodes.registerType('라이트토크',{
        category: '라이트토크',
        color: '#C0DEED',
        defaults: {
	    	name: {value:""},
			id : {value : "", required: true}
		},
        inputs:1,
        outputs:4,
        icon: "file.png",
        label: function() {
            return this.name||"라이트토크";
        },
        oneditsave: function() {
            var id = $("#node-config-input-id").val();
            //console.log(id);
            var node = this;
            node.id = id;
            /*
            $("#node-config-input-id").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
            */
        },
        oneditprepare : function() {
            $("#node-config-input-id").show();
            /*
            this.status({});
            var stat = this.context().global.get("isValidMsg");
            if (stat == 1) {
                this.status({fill:"green",shape:"dot",text:"연결됨"});
            } else {
                this.status({fill:"red", shape:"ring", text: "연결에 실패했습니다. MAC 주소를 다시 입력해주세요."})
            }*/
        }
    });
</script>

<script type="text/html" data-template-name="라이트토크">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> 이름</label>
        <input type="text" id="node-input-name" placeholder="이름">
    </div>
    <div class="form-row">
        <label for="node-input-id"><i class="fa fa-tasks"></i> MAC 주소<span data-i18n="common.label.id"></span></label>
        <input type="text" id="node-input-id" data-i18n="[placeholder]MAC 주소 입력 ex) 8caa7c832378">
    </div>
    <div class="form-row">
        <label for="node-input-startTime"><i class="fa fa-calendar"></i> 가동 시작 시간 (언제부터)<span data-i18n="common.label.schedule-startTime"></span></label>
        <input type="text" id="node-input-startTime" placeholder= "년/월/일,시:분:초 ex)2022/03/22,17:20:30">
    </div>
    <div class="form-row">
        <label for="node-input-endTime"><i class="fa fa-calendar"></i> 가동 완료 시간 (언제까지)<span data-i18n="common.label.endTime"></span></label>
        <input type="text" id="node-input-endTime" placeholder= "년/월/일,시:분:초 ex)2022/03/23,19:25:30">
    </div>
    <div class="form-tips"><b>도움말  </b>식별번호는 라이트토크 홈페이지의 MAC 주소번호를 입력해주시기 바랍니다. 초록색 연결표시가 뜨지 않으면 연결에 실패한 것이므로 다시 시도해 주십시오.</div>
</script>

<script type = "text/html" data-help-name = "라이트토크">
    <p>(주)라이트토크에서 개발한 노드입니다. 자사에서 개발한 기기를 제어하고 기기의 상태를 확인합니다.</p>
    <h3>출력</h3>
        <dl class = "message-properties">
        <dt>페이로드
            <span class = "property-type">string | buffer</span>
        <dd>
            디버그 노드를 출력으로 연결하시면 기기의 현 상태값을 JSON 형식으로 실시간으로 확인하실 수 있습니다.</p>
            노드 내의 버튼을 조작하시면 실시간으로 기기를 제어하실 수 있습니다.</p>
        </dt>
    <h3>주의사항</h3>
    <p>노드에서 자체적으로 MQTT 통신을 하기 때문에 MQTT 노드는 따로 사용하실 필요가 없습니다. 또한 구글 플레이스토어의 '라이트토크' 어플을 설치하셔서 기기를 연결하셔야 노드를 사용하실 수 있습니다.</p> 
</script>